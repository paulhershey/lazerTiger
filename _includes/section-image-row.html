{%- capture image_folder -%}{{ page.title | replace: ' ', '-' | downcase }}{%- endcapture -%}
{% assign media = include.media | default: 'sm, md, lg, xl' | split: ', ' %}
<section class="section-{{ include.background_color | default: 'default' }}">
  <div class="container-fluid px-0">
    <div class="row no-gutters">
      <div class="section-{{ include.left_column_color | default: 'default' }} ~ col-md-6 {{ include.class_1 | default: 'd-flex' }} flex-column align-items-center {{ include.spacing }}">
        {%- unless include.caption_top_1.blank? -%}
          <div class="w-50 mb-3">
            <b>{{ include.caption_top_1 }}</b>
          </div>
        {%- endunless -%}
        <picture class="lazyLoad">
          {%- for size in media reversed -%}
            {% case size %}
              {% when 'xl' %}{% assign min_width = "1440px" %}
              {% when 'lg' %}{% assign min_width = "1025px" %}
              {% when 'md' %}{% assign min_width = "767px" %}
              {% when 'sm' %}{% assign min_width = "576px" %}
              {% else %}
              {% assign min_width = "576px" %}
            {% endcase %}
            <source media="(min-width: {{ min_width }})"
                    data-srcset="{{ site.cloudinary | append: '/image/upload' }}/{{ image_folder }}/{{ size }}/{{ include.image_name_1 }}">
          {%- endfor -%}
          <img data-src="{{ site.cloudinary | append: '/image/upload' }}/{{ image_folder }}/{{ media | first }}/{{ include.image_name_1 }}"
                class="img-fluid" alt="{{ include.title }}">
        </picture>
        {%- unless include.caption_1.blank? -%}
          <div class="w-50 mt-3 d-flex justify-content-center">
            <b>{{ include.caption_1 }}</b>
          </div>
        {%- endunless -%}
      </div>
      <div class="section-{{ include.right_column_color | default: 'default' }} ~ col-md-6 {{ include.class_2 | default: 'd-flex' }} flex-column  align-items-center {{ include.spacing }}">
        {%- unless include.caption_top_2.blank? -%}
          <div class="w-50 mb-3">
            <b>{{ include.caption_top_2 }}</b>
          </div>
        {%- endunless -%}
        <picture class="lazyLoad">
          {%- for size in media reversed -%}
            {% case size %}
              {% when 'xl' %}{% assign min_width = "1440px" %}
              {% when 'lg' %}{% assign min_width = "1025px" %}
              {% when 'md' %}{% assign min_width = "767px" %}
              {% when 'sm' %}{% assign min_width = "576px" %}
              {% else %}
              {% assign min_width = "576px" %}
            {% endcase %}
            <source media="(min-width: {{ min_width }})"
                    data-srcset="{{ site.cloudinary | append: '/image/upload' }}/{{ image_folder }}/{{ size }}/{{ include.image_name_2 }}">
          {%- endfor -%}
          <img data-src="{{ site.cloudinary | append: '/image/upload' }}/{{ image_folder }}/{{ media | first }}/{{ include.image_name_2 }}"
                class="img-fluid" alt="{{ include.title }}">
        </picture>
        {%- unless include.caption_2.blank? -%}
          <div class="w-50 mt-3 d-flex justify-content-center">
            <b>{{ include.caption_2 }}</b>
          </div>
        {%- endunless -%}
      </div>
    </div>
  </div>
</section>
